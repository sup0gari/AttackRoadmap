#!/bin/bash
echo -n "Personal installation key: "
read -r PERSONAL_INSTALLATION_KEY

if [ -z "$PERSONAL_INSTALLATION_KEY" ]; then
    echo "Error: Key is empty."
    exit 1
fi

DECRYPTION_CODE=$(echo -n "$PERSONAL_INSTALLATION_KEY" | base64 -d | openssl pkeyutl -decrypt -inkey private.pem -pkeyopt rsa_padding_mode:pkcs1 2>/dev/null)

if [ $? -eq 0]; then
    echo -n "decryption code: $DECRYPTION_CODE"
    echo -n "$DECRYPTION_CODE" | xclip -selection clipboard
    echo -e "\n(Result copied to clipboard!)"
else
    echo "Error: Decryption failed. Check your private key or input."
fi