#!/usr/bin/env python3
import sys

def steganography(input_bin, input_jpg, output_jpg, signature):
    try:
        with open(input_bin, "rb") as f:
            input_bin_data = f.read()

        with open(input_jpg, "rb") as f:
            input_jpg_data = f.read()

        with open(output_jpg, "wb") as f:
            f.write(input_jpg_data)
            f.write(signature.encode())
            f.write(input_bin_data)

        print(f"[*] Success: {output_jpg} created.")
        print(f"[*] Signature: {signature}")
        print(f"[*] Total size: {len(input_jpg_data) + len(signature) + len(input_bin_data)} bytes")
    except Exception as e:
        print(f"[!] Error: {e}")

if __name__ == "__main__":
    if len(sys.argv) < 5:
        print("Usage: python steganography.py <input_bin> <input_jpg> <output_jpg> <signature>")
    else:
        steganography(sys.argv[1], sys.argv[2], sys.argv[3], sys.argv[4])